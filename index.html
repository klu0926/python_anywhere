<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Image to ASCII</title>
  </head>
  <body>
    <h1>Image to ASCII Art</h1>

    <!-- User uploads an image -->
    <input type="file" id="fileInput" />
    <button onclick="convert()">Convert</button>

    <!-- ASCII result will be shown here -->
    <pre
      id="asciiOutput"
      style="white-space: pre; font-family: monospace"
    ></pre>

    <script>
      // When the button is clicked:
      async function convert() {
        const fileInput = document.getElementById('fileInput')
        if (!fileInput.files[0]) return alert('Please upload an image.')

        const formData = new FormData() // Prepare file
        formData.append('image', fileInput.files[0])

        // Send to Python backend (Python backend host on python anywhere)
        const response = await fetch(
          'https://klu0926.pythonanywhere.com/upload',
          {
            method: 'POST',
            body: formData,
          }
        )

        const data = await response.json() // Get response
        document.getElementById('asciiOutput').textContent =
          data.ascii || data.error
      }
    </script>
  </body>
</html>
